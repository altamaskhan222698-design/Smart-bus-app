<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mumbai Smart Terminal</title>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Teko:wght@600&display=swap" rel="stylesheet">
    
    <style>
        body {
            background-color: #000;
            color: white;
            font-family: 'Teko', sans-serif;
            text-align: center;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        /* Top Header (BEST Red) */
        .header {
            width: 100%;
            background: #d32f2f;
            padding: 15px;
            font-size: 28px;
            font-weight: bold;
            border-bottom: 5px solid #ffab00;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }

        /* Scanner Screen */
        #scan-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
        }
        #reader {
            width: 350px;
            border: 5px solid #ffab00;
            border-radius: 15px;
        }

        /* Display Screen (Hidden initially) */
        #display-screen {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
            background: radial-gradient(circle, #222 0%, #000 100%);
        }

        .bus-no { font-family: 'Orbitron', sans-serif; font-size: 110px; color: #ff3d00; margin: 0; text-shadow: 0 0 30px red; line-height: 1; }
        .route { font-size: 45px; color: white; margin-top: 10px; text-transform: uppercase; }
        .stops { font-size: 30px; color: #ffab00; margin-top: 10px; }
        .msg { font-size: 35px; color: #00e676; margin-top: 30px; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }

        .btn {
            background: #ffab00; color: black; padding: 15px 40px; border: none;
            font-size: 24px; font-weight: bold; border-radius: 50px; margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="header">üöè BEST MUMBAI TERMINAL</div>

    <div id="scan-screen">
        <div id="reader"></div>
        <div style="margin-top:20px; color:#aaa; font-size:22px;">‡§ï‡•É‡§™‡§Ø‡§æ QR ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡•á‡§Ç...</div>
        <button class="btn" onclick="startScanner()">üî¥ START SCANNER</button>
    </div>

    <div id="display-screen">
        <div style="color:#aaa; font-size:24px;">‚óè NOW ARRIVING ‚óè</div>
        <h1 class="bus-no" id="dNum">--</h1>
        <div class="route" id="dRoute">--</div>
        <div class="stops" id="dStops">Via: --</div>
        <div class="msg">‡§∂‡•Å‡§≠ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ | HAPPY JOURNEY</div>
    </div>

    <script>
        // --- ASLI MUMBAI ROUTES ---
        const busData = {
            "BUS_101": {
                no: "332",
                route: "KURLA ‚ûù CSMT", // Aapka Request
                stops: "Dadar ‚Ä¢ Byculla",
                hi: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 332, ‡§ï‡•Å‡§∞‡•ç‡§≤‡§æ ‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§∏‡•á ‡§∏‡•Ä.‡§è‡§∏.‡§è‡§Æ.‡§ü‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü ‡§ó‡§Ø‡•Ä ‡§π‡•à. ‡§Ø‡§π ‡§¶‡§æ‡§¶‡§∞ ‡§î‡§∞ ‡§≠‡§æ‡§Ø‡§ñ‡§≤‡§æ ‡§∞‡•Å‡§ï‡•á‡§ó‡•Ä.",
                mr: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 332, ‡§ï‡•Å‡§∞‡•ç‡§≤‡§æ ‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§µ‡§∞‡•Ç‡§® ‡§∏‡•Ä.‡§è‡§∏.‡§è‡§Æ.‡§ü‡•Ä ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á.",
                en: "Namaskar. Bus number 332, from Kurla to CSMT, has arrived."
            },
            "BUS_102": {
                no: "A-1",
                route: "CSMT ‚ûù NARIMAN PT",
                stops: "Churchgate ‚Ä¢ Mantralaya",
                hi: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ ‡§è-‡§µ‡§®, ‡§∏‡•Ä.‡§è‡§∏.‡§è‡§Æ.‡§ü‡•Ä ‡§∏‡•á ‡§®‡§∞‡•Ä‡§Æ‡§® ‡§™‡•â‡§á‡§Ç‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à.",
                mr: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§è-‡§µ‡§®, ‡§∏‡•Ä.‡§è‡§∏.‡§è‡§Æ.‡§ü‡•Ä ‡§µ‡§∞‡•Ç‡§® ‡§®‡§∞‡•Ä‡§Æ‡§® ‡§™‡•â‡§á‡§Ç‡§ü ‡§∏‡§æ‡§†‡•Ä ‡§§‡§Ø‡§æ‡§∞ ‡§Ü‡§π‡•á.",
                en: "Namaskar. Bus A-1 to Nariman Point is ready for departure."
            },
            "BUS_103": {
                no: "203",
                route: "ANDHERI ‚ûù JUHU",
                stops: "Bhavans ‚Ä¢ Juhu Tara",
                hi: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 203, ‡§Ö‡§Å‡§ß‡•á‡§∞‡•Ä ‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§∏‡•á ‡§ú‡•Å‡§π‡•Ç ‡§¨‡•Ä‡§ö ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à.",
                mr: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 203, ‡§Ö‡§Ç‡§ß‡•á‡§∞‡•Ä ‡§µ‡§∞‡•Ç‡§® ‡§ú‡•Å‡§π‡•Ç ‡§¨‡•Ä‡§ö ‡§∏‡§æ‡§†‡•Ä ‡§ú‡§æ‡§§ ‡§Ü‡§π‡•á.",
                en: "Namaskar. Bus 203 to Juhu Beach is departing now."
            },
            "BUS_104": {
                no: "C-42",
                route: "DADAR ‚ûù WADALA",
                stops: "Matunga ‚Ä¢ Five Gardens",
                hi: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ ‡§∏‡•Ä-42, ‡§¶‡§æ‡§¶‡§∞ ‡§∏‡•á ‡§µ‡§°‡§æ‡§≤‡§æ ‡§°‡§ø‡§™‡•ã ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü ‡§ó‡§Ø‡•Ä ‡§π‡•à.",
                mr: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï ‡§∏‡•Ä-42, ‡§¶‡§æ‡§¶‡§∞ ‡§µ‡§∞‡•Ç‡§® ‡§µ‡§°‡§æ‡§≤‡§æ ‡§°‡•á‡§™‡•ã ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á.",
                en: "Namaskar. Bus C-42 to Wadala Depot has arrived."
            },
            "BUS_105": {
                no: "302",
                route: "BANDRA ‚ûù SION",
                stops: "Dharavi ‚Ä¢ Kala Kila",
                hi: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 302, ‡§¨‡§æ‡§Ç‡§¶‡•ç‡§∞‡§æ ‡§∏‡•á ‡§∏‡§æ‡§Ø‡§® ‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü ‡§ó‡§Ø‡•Ä ‡§π‡•à.",
                mr: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 302, ‡§µ‡§æ‡§Ç‡§¶‡•ç‡§∞‡•á ‡§µ‡§∞‡•Ç‡§® ‡§∏‡§æ‡§Ø‡§® ‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á.",
                en: "Namaskar. Bus 302 from Bandra to Sion has arrived."
            }
        };

        let isSpeaking = false;
        let lastScanned = "";

        function onScanSuccess(decodedText) {
            if (isSpeaking || decodedText === lastScanned) return;

            if (busData[decodedText]) {
                lastScanned = decodedText;
                const bus = busData[decodedText];
                
                showDisplay(bus);
                speakTrilingual(bus.hi, bus.mr, bus.en);
            }
        }

        function showDisplay(bus) {
            document.getElementById('scan-screen').style.display = 'none';
            document.getElementById('display-screen').style.display = 'flex';
            
            document.getElementById('dNum').innerText = bus.no;
            document.getElementById('dRoute').innerText = bus.route;
            document.getElementById('dStops').innerText = "Via: " + bus.stops;
        }

        function hideDisplay() {
            document.getElementById('display-screen').style.display = 'none';
            document.getElementById('scan-screen').style.display = 'flex';
            document.getElementById('reader').innerHTML = ""; 
            startScanner();
        }

        function speakTrilingual(hiText, mrText, enText) {
            isSpeaking = true;
            window.speechSynthesis.cancel();

            // 1. HINDI
            let msgHi = new SpeechSynthesisUtterance(hiText);
            msgHi.lang = 'hi-IN'; msgHi.rate = 0.9;

            // 2. MARATHI (Hindi Engine use kar rahe hain clear pronunciation ke liye)
            let msgMr = new SpeechSynthesisUtterance(mrText);
            msgMr.lang = 'hi-IN'; msgMr.rate = 0.9;

            // 3. ENGLISH
            let msgEn = new SpeechSynthesisUtterance(enText);
            msgEn.lang = 'en-IN'; msgEn.rate = 0.9;

            // Sequence: Hindi -> Marathi -> English -> Reset
            msgHi.onend = () => { setTimeout(() => window.speechSynthesis.speak(msgMr), 500); };
            msgMr.onend = () => { setTimeout(() => window.speechSynthesis.speak(msgEn), 500); };
            msgEn.onend = () => { 
                isSpeaking = false; 
                lastScanned = ""; 
                setTimeout(hideDisplay, 3000); 
            };

            window.speechSynthesis.speak(msgHi);
        }

        function startScanner() {
            const scanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 });
            scanner.render(onScanSuccess);
        }
    </script>
</body>
            </html>
            
