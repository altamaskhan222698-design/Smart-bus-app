<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mumbai Central Terminal</title>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Teko:wght@500&display=swap" rel="stylesheet">
    
    <style>
        body {
            background-color: #000;
            color: white;
            font-family: 'Teko', sans-serif;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }

        /* --- HEADER --- */
        .header {
            width: 100%;
            background: linear-gradient(90deg, #d32f2f, #b71c1c); /* BEST Red */
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 5px solid #ffab00; /* Yellow Strip */
            box-shadow: 0 5px 20px rgba(255, 0, 0, 0.5);
        }
        .title { font-family: 'Orbitron', sans-serif; font-size: 24px; margin-left: 20px; color: #ffab00; }
        .clock { font-size: 24px; margin-right: 20px; font-weight: bold; }

        /* --- SCANNER SCREEN --- */
        #scan-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
        }
        #reader {
            width: 350px;
            border: 4px solid #ffab00;
            border-radius: 10px;
            background: #111;
        }

        /* --- BIG DISPLAY SCREEN (Cinema Mode) --- */
        #display-screen {
            display: none; /* Hidden initially */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
            background: radial-gradient(circle, #222 0%, #000 100%);
            z-index: 99;
            text-align: center;
        }
        
        .lang-indicator {
            color: #00e676;
            font-size: 20px;
            margin-bottom: 10px;
            letter-spacing: 2px;
            animation: blink 1s infinite;
        }
        @keyframes blink { 50% { opacity: 0.5; } }

        .bus-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 120px; /* Huge Text */
            color: #ff3d00; /* Red LED */
            margin: 0;
            line-height: 1;
            text-shadow: 0 0 40px #ff3d00;
        }

        .route-text { font-family: 'Orbitron', sans-serif; font-size: 40px; color: white; margin-top: 10px; text-transform: uppercase; }
        .stop-text { font-size: 28px; color: #ffab00; margin-top: 10px; }
        .wish-text { font-size: 30px; color: #00e676; margin-top: 30px; }

        /* --- BUTTONS --- */
        .btn {
            background: #d32f2f; color: white; border: none; padding: 15px 30px;
            font-size: 22px; font-weight: bold; border-radius: 50px;
            margin-top: 30px; cursor: pointer; box-shadow: 0 0 15px #d32f2f;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="title">MUMBAI TERMINAL</div>
        <div class="clock" id="clock">12:00</div>
    </div>

    <div id="scan-screen">
        <div id="reader"></div>
        <div style="color: #aaa; margin-top: 10px; font-size: 20px;">Waiting for Bus Arrival...</div>
        <div style="margin-top:20px;">
            <button class="btn" onclick="startScanner()">üîä CLICK TO START</button>
        </div>
    </div>

    <div id="display-screen">
        <div class="lang-indicator">‚óè ANNOUNCING...</div>
        <h1 class="bus-number" id="dNum">--</h1>
        <div class="route-text" id="dRoute">--</div>
        <div class="stop-text" id="dStops">Via: --</div>
        <div class="wish-text">HAPPY JOURNEY</div>
    </div>

    <script>
        // Real Clock
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }, 1000);

        // --- TRILINGUAL BUS DATA ---
        const busData = {
            "BUS_101": {
                no: "101",
                route: "NAGPUR ‚ûù MUMBAI",
                stops: "Amravati, Aurangabad",
                // 1. HINDI
                hi: "‡§°‡§ø‡§Ç‡§ó ‡§°‡•ã‡§Ç‡§ó... ‡§Ø‡§æ‡§§‡•ç‡§∞‡•Ä‡§ó‡§£ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 101, ‡§®‡§æ‡§ó‡§™‡•Å‡§∞ ‡§∏‡•á ‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡§æ‡§∞‡•ç‡§Æ ‡§®‡§Ç‡§¨‡§∞ 1 ‡§™‡§∞ ‡§Ü ‡§ó‡§Ø‡•Ä ‡§π‡•à. ‡§Ø‡§π ‡§¨‡§∏ ‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä ‡§î‡§∞ ‡§î‡§∞‡§Ç‡§ó‡§æ‡§¨‡§æ‡§¶ ‡§π‡•ã‡§§‡•á ‡§π‡•Å‡§è ‡§ú‡§æ‡§è‡§ó‡•Ä. ‡§Ü‡§™‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§Æ‡§Ç‡§ó‡§≤‡§Æ‡§Ø ‡§π‡•ã.",
                // 2. MARATHI
                mr: "‡§™‡•ç‡§∞‡§µ‡§æ‡§∂‡§æ‡§Ç‡§®‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑ ‡§¶‡•ç‡§Ø‡§æ. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 101, ‡§®‡§æ‡§ó‡§™‡•Ç‡§∞ ‡§µ‡§∞‡•Ç‡§® ‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§∏‡§æ‡§†‡•Ä ‡§™‡•ç‡§≤‡•Ö‡§ü‡§´‡•â‡§∞‡•ç‡§Æ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 1 ‡§µ‡§∞ ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á. ‡§π‡•Ä ‡§¨‡§∏ ‡§Ö‡§Æ‡§∞‡§æ‡§µ‡§§‡•Ä ‡§Ü‡§£‡§ø ‡§î‡§∞‡§Ç‡§ó‡§æ‡§¨‡§æ‡§¶ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡•á ‡§ú‡§æ‡§à‡§≤. ‡§Ü‡§™‡§≤‡§æ ‡§™‡•ç‡§∞‡§µ‡§æ‡§∏ ‡§∏‡•Å‡§ñ‡§æ‡§ö‡§æ ‡§π‡•ã‡§µ‡•ã.",
                // 3. ENGLISH
                en: "May I have your attention please. Bus number 101, from Nagpur to Mumbai, has arrived on platform number 1. Stopping at Amravati and Aurangabad. We wish you a happy journey."
            },
            "BUS_102": {
                no: "102",
                route: "MUMBAI ‚ûù DELHI",
                stops: "Ahmedabad, Jaipur",
                hi: "‡§°‡§ø‡§Ç‡§ó ‡§°‡•ã‡§Ç‡§ó... ‡§Ø‡§æ‡§§‡•ç‡§∞‡•Ä‡§ó‡§£ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 102, ‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§∏‡•á ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü ‡§ó‡§Ø‡•Ä ‡§π‡•à. ‡§Ü‡§™‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§∂‡•Å‡§≠ ‡§π‡•ã.",
                mr: "‡§™‡•ç‡§∞‡§µ‡§æ‡§∂‡§æ‡§Ç‡§®‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑ ‡§¶‡•ç‡§Ø‡§æ. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 102, ‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§µ‡§∞‡•Ç‡§® ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á. ‡§Ü‡§™‡§≤‡§æ ‡§™‡•ç‡§∞‡§µ‡§æ‡§∏ ‡§∏‡•Å‡§ñ‡§æ‡§ö‡§æ ‡§π‡•ã‡§µ‡•ã.",
                en: "Attention please. Bus number 102, Mumbai to Delhi, has arrived. Wish you a safe journey."
            },
            "BUS_103": {
                no: "103",
                route: "AHMEDABAD ‚ûù LUCKNOW",
                stops: "Bhopal, Kanpur",
                hi: "‡§Ø‡§æ‡§§‡•ç‡§∞‡•Ä‡§ó‡§£ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 103, ‡§Ö‡§π‡§Æ‡§¶‡§æ‡§¨‡§æ‡§¶ ‡§∏‡•á ‡§≤‡§ñ‡§®‡§ä ‡§ú‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à. ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶.",
                mr: "‡§™‡•ç‡§∞‡§µ‡§æ‡§∂‡§æ‡§Ç‡§®‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑ ‡§¶‡•ç‡§Ø‡§æ. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 103, ‡§Ö‡§π‡§Æ‡§¶‡§æ‡§¨‡§æ‡§¶ ‡§µ‡§∞‡•Ç‡§® ‡§≤‡§ñ‡§®‡§ä ‡§∏‡§æ‡§†‡•Ä ‡§§‡§Ø‡§æ‡§∞ ‡§Ü‡§π‡•á. ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶.",
                en: "Attention please. Bus number 103, Ahmedabad to Lucknow, is ready for departure. Thank you."
            },
            "BUS_104": {
                no: "104",
                route: "DELHI ‚ûù KOLKATA",
                stops: "Agra, Varanasi",
                hi: "‡§Ø‡§æ‡§§‡•ç‡§∞‡•Ä‡§ó‡§£ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 104, ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§∏‡•á ‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡§æ‡§∞‡•ç‡§Æ ‡§™‡§∞ ‡§Ü ‡§ó‡§Ø‡•Ä ‡§π‡•à.",
                mr: "‡§™‡•ç‡§∞‡§µ‡§æ‡§∂‡§æ‡§Ç‡§®‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑ ‡§¶‡•ç‡§Ø‡§æ. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 104, ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§µ‡§∞‡•Ç‡§® ‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ ‡§∏‡§æ‡§†‡•Ä ‡§™‡•ç‡§≤‡•Ö‡§ü‡§´‡•â‡§∞‡•ç‡§Æ ‡§µ‡§∞ ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á.",
                en: "Attention please. Bus number 104, Delhi to Kolkata, has arrived."
            },
            "BUS_105": {
                no: "105",
                route: "PUNE ‚ûù BANGALORE",
                stops: "Kolhapur, Belgaum",
                hi: "‡§Ø‡§æ‡§§‡•ç‡§∞‡•Ä‡§ó‡§£ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç. ‡§¨‡§∏ ‡§®‡§Ç‡§¨‡§∞ 105, ‡§™‡•Å‡§£‡•á ‡§∏‡•á ‡§¨‡•à‡§Ç‡§ó‡§≤‡•ã‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü ‡§ó‡§Ø‡•Ä ‡§π‡•à. ‡§∂‡•Å‡§≠ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ.",
                mr: "‡§™‡•ç‡§∞‡§µ‡§æ‡§∂‡§æ‡§Ç‡§®‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡§ï‡•ç‡§∑ ‡§¶‡•ç‡§Ø‡§æ. ‡§¨‡§∏ ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï 105, ‡§™‡•Å‡§£‡•á ‡§µ‡§∞‡•Ç‡§® ‡§¨‡•à‡§Ç‡§ó‡§≤‡•ã‡§∞ ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§≤‡•Ä ‡§Ü‡§π‡•á. ‡§∂‡•Å‡§≠ ‡§™‡•ç‡§∞‡§µ‡§æ‡§∏.",
                en: "Attention please. Bus number 105, Pune to Bangalore, has arrived. Happy Journey."
            }
        };

        let isSpeaking = false;
        let lastScanned = "";

        function onScanSuccess(decodedText) {
            if (isSpeaking || decodedText === lastScanned) return;

            if (busData[decodedText]) {
                lastScanned = decodedText;
                const bus = busData[decodedText];
                
                showDisplay(bus);
                speakTrilingual(bus.hi, bus.mr, bus.en);
            }
        }

        function showDisplay(bus) {
            document.getElementById('scan-screen').style.display = 'none';
            document.getElementById('display-screen').style.display = 'flex';
            
            document.getElementById('dNum').innerText = bus.no;
            document.getElementById('dRoute').innerText = bus.route;
            document.getElementById('dStops').innerText = "Via: " + bus.stops;
        }

        function hideDisplay() {
            document.getElementById('display-screen').style.display = 'none';
            document.getElementById('scan-screen').style.display = 'flex';
            // Scanner reset
            document.getElementById('reader').innerHTML = ""; 
            startScanner();
        }

        // --- TRILINGUAL ENGINE ---
        function speakTrilingual(hindiText, marathiText, englishText) {
            isSpeaking = true;
            window.speechSynthesis.cancel();

            // 1. HINDI SETUP
            let msgHi = new SpeechSynthesisUtterance(hindiText);
            msgHi.lang = 'hi-IN'; msgHi.rate = 0.9;

            // 2. MARATHI SETUP (Using Hindi engine for correct pronunciation)
            let msgMr = new SpeechSynthesisUtterance(marathiText);
            msgMr.lang = 'hi-IN'; msgMr.rate = 0.9; 

            // 3. ENGLISH SETUP
            let msgEn = new SpeechSynthesisUtterance(englishText);
            msgEn.lang = 'en-IN'; msgEn.rate = 0.9;

            // CHAINING: Hindi -> Marathi -> English -> End
            msgHi.onend = function() {
                setTimeout(() => { window.speechSynthesis.speak(msgMr); }, 500);
            };
            
            msgMr.onend = function() {
                setTimeout(() => { window.speechSynthesis.speak(msgEn); }, 500);
            };

            msgEn.onend = function() {
                isSpeaking = false;
                lastScanned = ""; 
                setTimeout(hideDisplay, 3000); // 3 sec baad wapas scanner
            };

            // Start with Hindi
            window.speechSynthesis.speak(msgHi);
        }

        function startScanner() {
            const scanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 });
            scanner.render(onScanSuccess);
        }
    </script>
</body>
</html>
